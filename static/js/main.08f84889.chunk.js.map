{"version":3,"sources":["components/Modal/Modal.module.css","components/ImageGallery/ImageGallery.module.css","components/Button/Button.module.css","components/Searchbar/Searchbar.js","services/pixabayApi.js","components/ImageGallery/ImageGalleryItem/ImageGalleryItem.js","components/Modal/Modal.js","components/ImageGallery/ImageGallery.js","components/Button/Button.js","components/Notifications/Notifications.js","App.js","index.js","components/Searchbar/Searchbar.module.css","components/ImageGallery/ImageGalleryItem/ImageGalleryItem.module.css"],"names":["module","exports","Searchbar","state","query","handleChange","e","setState","currentTarget","value","handleSubmit","preventDefault","props","onSubmit","this","className","sbs","SearchForm","input","type","autoComplete","autoFocus","placeholder","onChange","name","button","button_label","Component","fetchImages","searchQuery","page","url","fetch","then","response","json","hits","ImageGalleryItem","elem","getImgForModal","webformatURL","tags","gis","src","alt","image","onClick","Modal","closeModal","target","nodeName","code","hideModal","window","addEventListener","removeEventListener","ms","Overlay","children","ImageGallery","showModal","toggleModal","gallery","largeImageURL","igs","map","item","id","Button","getNewPage","bs","Notifications","fetchLength","galleryLength","error","defaultProps","App","isLoading","getQueryByForm","setNewPage","prevState","fetchImagesByQuery","prevProps","result","length","catch","finally","scrollTo","top","document","documentElement","scrollHeight","behavior","color","height","width","timeout","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.08f84889.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"Overlay\":\"Modal_Overlay__1Yl-s\",\"Modal\":\"Modal_Modal__qToR5\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGallery\":\"ImageGallery_ImageGallery__3br61\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Button\":\"Button_Button__1G_5T\"};","import React, { Component } from 'react';\nimport sbs from './Searchbar.module.css';\nimport PropTypes from 'prop-types';\n\nclass Searchbar extends Component {\n  state = {\n    query: '',\n  };\n  handleChange = e => {\n    this.setState({ query: e.currentTarget.value });\n  };\n  handleSubmit = e => {\n    e.preventDefault();\n    const { query } = this.state;\n    this.props.onSubmit({ query });\n    this.setState({ query: '' });\n  };\n  render() {\n    const { query } = this.state;\n    // console.log(query);\n    return (\n      <header className={sbs.Searchbar}>\n        <form className={sbs.SearchForm} onSubmit={this.handleSubmit}>\n          <input\n            className={sbs.input}\n            type=\"text\"\n            autoComplete=\"off\"\n            autoFocus\n            placeholder=\"Search images and photos\"\n            onChange={this.handleChange}\n            name=\"query\"\n            value={query}\n          />\n          <button type=\"submit\" className={sbs.button}>\n            <span className={sbs.button_label}>Search</span>\n          </button>\n        </form>\n      </header>\n    );\n  }\n}\nSearchbar.propTypes = {\n  onSubmit: PropTypes.func.isRequired,\n};\nexport default Searchbar;\n","const apiKey = '24174287-289119146e68b1b20119b788d';\n\nfunction fetchImages(searchQuery, page) {\n  // console.log(searchQuery);\n  const url = `https://pixabay.com/api/?key=${apiKey}&q=${searchQuery}&image_type=photo&orientation=horizontal&page=${page}&per_page=12`;\n\n  return fetch(url)\n    .then(response => {\n      // console.log(response);\n      return response.json();\n    })\n    .then(({ hits }) => {\n      // console.log({ hits });\n      return hits;\n    });\n}\n\nexport default fetchImages;\n","import React from 'react';\nimport gis from './ImageGalleryItem.module.css';\nimport PropTypes from 'prop-types';\n\nconst ImageGalleryItem = ({ elem, getImgForModal }) => {\n  // console.log(elem);\n  const { webformatURL, tags } = elem;\n  // console.log(largeImageURL);\n  return (\n    <li className={gis.ImageGalleryItem}>\n      <img\n        src={webformatURL}\n        alt={tags}\n        className={gis.image}\n        onClick={() => getImgForModal({ elem })}\n      />\n    </li>\n  );\n};\nImageGalleryItem.propTypes = {\n  elem: PropTypes.shape({\n    webformatURL: PropTypes.string.isRequired,\n    tags: PropTypes.string.isRequired,\n  }).isRequired,\n  getImgForModal: PropTypes.func.isRequired,\n};\nexport default ImageGalleryItem;\n","import React, { Component } from 'react';\nimport ms from './Modal.module.css';\nimport PropTypes from 'prop-types';\nclass Modal extends Component {\n  componentDidMount() {\n    window.addEventListener('keydown', this.closeModal);\n  }\n  componentWillUnmount() {\n    window.removeEventListener('keydown', this.closeModal);\n  }\n\n  closeModal = e => {\n    if (e.target.nodeName !== 'IMG' || e.code === 'Escape') {\n      this.props.hideModal();\n    }\n  };\n  render() {\n    return (\n      <div className={ms.Overlay} onClick={this.closeModal}>\n        <div className={ms.Modal}>{this.props.children}</div>\n      </div>\n    );\n  }\n}\nModal.propTypes = {\n  hideModal: PropTypes.func.isRequired,\n};\nexport default Modal;\n","import React, { Component } from 'react';\nimport igs from './ImageGallery.module.css';\nimport PropTypes from 'prop-types';\nimport ImageGalleryItem from './ImageGalleryItem/ImageGalleryItem';\nimport Modal from '../Modal/Modal';\nclass ImageGallery extends Component {\n  state = {\n    elem: '',\n    showModal: false,\n  };\n  toggleModal = () => {\n    this.setState({\n      showModal: !this.state.showModal,\n    });\n  };\n  getImgForModal = ({ elem }) => {\n    if (elem) {\n      this.toggleModal();\n      this.setState({\n        elem,\n      });\n    }\n  };\n  render() {\n    const { showModal, elem } = this.state;\n    const { gallery } = this.props;\n    // console.log(elem);\n    const { tags, largeImageURL } = elem;\n    return (\n      <ul className={igs.ImageGallery}>\n        {gallery.map(item => {\n          return (\n            <ImageGalleryItem\n              key={item.id}\n              elem={item}\n              getImgForModal={this.getImgForModal}\n            />\n          );\n        })}\n        {showModal && (\n          <Modal hideModal={this.toggleModal}>\n            <img src={largeImageURL} alt={tags} />\n          </Modal>\n        )}\n      </ul>\n    );\n  }\n}\nImageGallery.propTypes = {\n  gallery: PropTypes.arrayOf(\n    PropTypes.shape({\n      id: PropTypes.number.isRequired,\n    }),\n  ).isRequired,\n};\nexport default ImageGallery;\n","import React from 'react';\nimport bs from './Button.module.css';\nimport PropTypes from 'prop-types';\n\nconst Button = ({ getNewPage }) => {\n  // console.log(getNewPage);\n  return (\n    <button\n      className={bs.Button}\n      type=\"button\"\n      data-action=\"load-more\"\n      // disabled={true}\n      onClick={getNewPage}\n    >\n      Show more\n    </button>\n  );\n};\nButton.propTypes = {\n  getNewPage: PropTypes.func.isRequired,\n};\nexport default Button;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nconst Notifications = ({ fetchLength, galleryLength, searchQuery, error }) => {\n  if (error) {\n    // console.log(error);\n    return <p>Oops! Something wrong! Request error!</p>;\n  } else if (!error) {\n    if (!searchQuery) {\n      \n    } else if (searchQuery) {\n      if (!fetchLength && !galleryLength) {\n        return <p>Image not found. Please check your request and try again!</p>;\n      } else if (fetchLength < 12 && galleryLength > 0) {\n        return <p>These are all the images we found!</p>;\n      }\n    }\n  }\n\n  return <p></p>;\n};\nNotifications.defaultProps = {\n  fetchLength: 0,\n  galleryLength: 0,\n  searchQuery: '',\n  error: false,\n};\nNotifications.propTypes = {\n  fetchLength: PropTypes.number,\n  galleryLength: PropTypes.number,\n  searchQuery: PropTypes.string,\n  error: PropTypes.bool,\n};\nexport default Notifications;\n","import React, { Component } from 'react';\nimport './App.css';\nimport 'react-loader-spinner/dist/loader/css/react-spinner-loader.css';\nimport Loader from 'react-loader-spinner';\nimport Searchbar from './components/Searchbar/Searchbar';\nimport fetchImages from './services/pixabayApi';\nimport ImageGallery from './components/ImageGallery/ImageGallery';\nimport Button from './components/Button/Button';\nimport Notifications from './components/Notifications/Notifications';\n\nclass App extends Component {\n  state = {\n    query: '',\n    page: 1,\n    gallery: [],\n    fetchLength: null,\n    isLoading: false,\n    error: false,\n  };\n\n  componentDidUpdate(prevProps, prevState) {\n    // console.log('я обновился');\n\n    const { query, page } = this.state;\n    if (query !== prevState.query && query !== '') {\n      this.fetchImagesByQuery(query);\n    } else if (query === prevState.query && page !== prevState.page) {\n      this.fetchImagesByQuery(query);\n    }\n  }\n\n  getQueryByForm = ({ query }) => {\n    // console.log(query);\n    this.setState({ query: '', page: 1, gallery: [], fetchLength: 0 });\n    this.setState({ query: query, page: 1, gallery: [] });\n  };\n\n  setNewPage = e => {\n    e.preventDefault();\n    this.setState(prevState => ({\n      page: prevState.page + 1,\n    }));\n  };\n\n  fetchImagesByQuery = (prevProps, prevState) => {\n    const { query, page } = this.state;\n\n    this.setState({ isLoading: true });\n    fetchImages(query, page)\n      .then(result => {\n        // console.log(result);\n        this.setState(prevState => ({\n          gallery: [...prevState.gallery, ...result],\n          fetchLength: result.length,\n        }));\n      })\n      .catch(error => {\n        this.setState({ error: true });\n      })\n      .finally(() => {\n        this.setState({ isLoading: false });\n        window.scrollTo({\n          top: document.documentElement.scrollHeight,\n          behavior: 'smooth',\n        });\n      });\n    // }\n  };\n  render() {\n    const { gallery, fetchLength, isLoading, query, error } = this.state;\n    // console.log(fetchLength);\n    return (\n      <div className=\"App\">\n        \n        <Searchbar onSubmit={this.getQueryByForm} />\n        <ImageGallery gallery={gallery} />\n        {isLoading && (\n          <Loader\n            type=\"ThreeDots\"\n            color=\"#3f51b5\"\n            height={100}\n            width={100}\n            timeout={3000}\n          />\n        )}\n        {fetchLength === 12 && !isLoading && (\n          <Button getNewPage={this.setNewPage} />\n        )}\n\n        <Notifications\n          fetchLength={fetchLength}\n          galleryLength={gallery.length}\n          searchQuery={query}\n          error={error}\n        />\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Searchbar\":\"Searchbar_Searchbar__1pmAP\",\"SearchForm\":\"Searchbar_SearchForm__3m5_5\",\"button\":\"Searchbar_button__16Uk0\",\"button_label\":\"Searchbar_button_label__1ZbLN\",\"input\":\"Searchbar_input__2OacW\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGalleryItem\":\"ImageGalleryItem_ImageGalleryItem__AZXyt\",\"image\":\"ImageGalleryItem_image__T4ZGN\"};"],"sourceRoot":""}